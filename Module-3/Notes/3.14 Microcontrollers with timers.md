Microcontrollers typically come with one to two timers built in to measure time intervals. This is also referred to as a watchdog processing unit or if its a dedicated part of the CPU it could be referred to as a watchdog thread. Essentially what happens is that when the watchdog hits its specified limit it'll interrupt the CPU/thread of processing.

In C there is a special function for this interruption called **interrupt service routine** or **ISR**. The watchdog service will call this ISR. In RIMS the ISR is called **TimerISR** and is defined by:

```C
void TimerISR() {
	// User defined code on ISR call
}
```

Every time the hardware timer ticks the TimerISR function gets called. **A USERS CODE SHOULD NEVER CALL TIMERISR ITSELF, ONLY THE WATCHDOG.** You need to ensure that the microcontroller you're working with supports a specific ISR flag such as RIMS ISR support. 

The user does however set the timer frequency and if the timer is on/off. You can refer to [[3.12 SynchSMs and time intervals for inputs]] for what to set your `TimerSet()` function too. One use of the ISR is to set a global **flag** to 1. A flag is a global variable used by different parts of a C program to communicate basic status information with one another. The user's main C code can thus monitor the flag's value, waiting for the flag to become 1, to determine that the timer has ticked. A short example of this would be:

```C
#include "RIMS.h"

volatile unsigned char TimerFlag = 0;

void TimerISR() {
   TimerFlag = 1;
}

void main() {

   B = 0;//Initialize output

   TimerSet(1000); // Timer period = 1000 ms (1 sec)
   TimerOn();      // Turn timer on

   while (1) {
      B0 = !B0;            // Toggle B0
      while(!TimerFlag) {} // Wait 1 sec
      TimerFlag = 0;
          // NOTE: better style would use a synchSM
          // This example just illustrates use of an ISR and flag
   }
}
```

It's important to declare your timer flag as both a global and as volatile. As you can see the nest while loop looks like it would be an endless loop except for the flag that the timer thread that calls the ISR will set the flag to one which allows that flag on the main thread to exit and setting it back to zero again.

- Setting a flag to one is called **raising a flag**
- Setting a flag to zero is called **lowering a flag**

Most microcontrollers come with timer support because of the nature of embedded programming working with time based behaviors so often.